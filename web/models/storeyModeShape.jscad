function getParameterDefinitions(){return [{ name: 'numMode', caption: '模态阶数:', type: 'int', initial: 1, min: 1, max: 4, step: 1 }];}function main(params) {var storey = involuteStorey(params.numMode);return storey;}function involuteStorey(numMode) {var storeyMode = [[{'dof':1,'value':0.024554187340699807},{'dof':2,'value':0.03226114725748949},{'dof':3,'value':0.058204396247029576},{'dof':4,'value':0.09877466482199236},{'dof':5,'value':0.1475003343271332},{'dof':6,'value':0.19879750968158094},{'dof':7,'value':0.24782481705993822},{'dof':8,'value':0.29042091322419966},{'dof':9,'value':0.3232125956342608},{'dof':10,'value':0.3437039886552426},{'dof':11,'value':0.35036056422730055},{'dof':12,'value':0.3426790787770946},{'dof':13,'value':0.32120315802351507},{'dof':14,'value':0.2874891777560394},{'dof':15,'value':0.24405622626927725},{'dof':16,'value':0.19428579615409622},{'dof':17,'value':0.14229602477586076},{'dof':18,'value':0.09282633145415325},{'dof':19,'value':0.05118891803777544},{'dof':20,'value':0.023520484737775956},{'dof':21,'value':0.014942416691259248},],[{'dof':1,'value':0.02433301240853636},{'dof':2,'value':0.04118876986376934},{'dof':3,'value':0.10702811538143477},{'dof':4,'value':0.19216647128482625},{'dof':5,'value':0.2703093303026909},{'dof':6,'value':0.32209052337071975},{'dof':7,'value':0.3347636203968994},{'dof':8,'value':0.30308570476118435},{'dof':9,'value':0.22955249084384116},{'dof':10,'value':0.12364064323344238},{'dof':11,'value':0.0010232490711354096},{'dof':12,'value':0.12346615770490957},{'dof':13,'value':0.22944763473438096},{'dof':14,'value':0.3030878780667109},{'dof':15,'value':0.33489398388717145},{'dof':16,'value':0.3223726844208794},{'dof':17,'value':0.2707567179980514},{'dof':18,'value':0.19281537561592393},{'dof':19,'value':0.10804261271777563},{'dof':20,'value':0.04326343010220521},{'dof':21,'value':0.027323130835658616},],[{'dof':1,'value':0.03501130683950593},{'dof':2,'value':0.06751229721459684},{'dof':3,'value':0.17616066156130228},{'dof':4,'value':0.28372266981633226},{'dof':5,'value':0.3353136678157133},{'dof':6,'value':0.3040743414829947},{'dof':7,'value':0.1926170085399288},{'dof':8,'value':0.030215189467691517},{'dof':9,'value':0.1386630175390937},{'dof':10,'value':0.26438536459776535},{'dof':11,'value':0.3112117579907441},{'dof':12,'value':0.2655613948272741},{'dof':13,'value':0.14072840698879027},{'dof':14,'value':0.029038382963258304},{'dof':15,'value':0.1911095988940107},{'dof':16,'value':0.30353934028016427},{'dof':17,'value':0.3361142448393384},{'dof':18,'value':0.2859112546412299},{'dof':19,'value':0.17966362902421165},{'dof':20,'value':0.072846457689527},{'dof':21,'value':0.040760152720291716},],[{'dof':1,'value':0.05127606805640339},{'dof':2,'value':0.1001755098295693},{'dof':3,'value':0.24439965562087612},{'dof':4,'value':0.3345320269184598},{'dof':5,'value':0.29322136119903985},{'dof':6,'value':0.12606045104388103},{'dof':7,'value':0.09733184895190393},{'dof':8,'value':0.26770945743225166},{'dof':9,'value':0.308960867541768},{'dof':10,'value':0.2013782005113427},{'dof':11,'value':0.004545074751755954},{'dof':12,'value':0.20605656138183723},{'dof':13,'value':0.30983685161108393},{'dof':14,'value':0.2642736278120007},{'dof':15,'value':0.0906892070834075},{'dof':16,'value':0.13080699866431494},{'dof':17,'value':0.29520865687855047},{'dof':18,'value':0.33180469687074265},{'dof':19,'value':0.23701974091555178},{'dof':20,'value':0.08844022156851813},{'dof':21,'value':0.04211874851659509},],];var numStorey = 21;var pillarHeight = 10;var storeyWidth = 10;var pillarPitch = 0.5;numMode = numMode - 1;var group = [];for (var k = 0; k < numStorey; k++) {if(k < 1){var pillarLeft = CSG.cylinder({start: [0, -storeyWidth/2, k*1.1*pillarHeight], end: [0, -storeyWidth/2 + storeyWidth*0.4*storeyMode[numMode][k].value*1.05, k*1.1 *pillarHeight + pillarHeight*1.05], radius: pillarPitch, resolution: 200});var pillarRight = CSG.cylinder({start: [0, storeyWidth/2, k*1.1*pillarHeight], end: [0, storeyWidth/2 + storeyWidth*0.4*storeyMode[numMode][k].value*1.05, k*1.1 *pillarHeight + pillarHeight*1.05], radius: pillarPitch, resolution: 200});}else{pillarLeft = CSG.cylinder({start: [0, -storeyWidth/2 + storeyWidth*0.4*storeyMode[numMode][k - 1].value - (storeyWidth*0.4*storeyMode[numMode][k].value - storeyWidth*0.4*storeyMode[numMode][k - 1].value)*0.05, k*1.1*pillarHeight - pillarHeight*0.05], end: [0, -storeyWidth/2 + storeyWidth*0.4*storeyMode[numMode][k].value + (storeyWidth*0.4*storeyMode[numMode][k].value - storeyWidth*0.4*storeyMode[numMode][k - 1].value)*0.05, k*1.1 *pillarHeight + pillarHeight*1.05], radius: pillarPitch, resolution: 200});pillarRight = CSG.cylinder({start: [0, storeyWidth/2 + storeyWidth*0.4*storeyMode[numMode][k - 1].value - (storeyWidth*0.4*storeyMode[numMode][k].value - storeyWidth*0.4*storeyMode[numMode][k - 1].value)*0.05, k*1.1*pillarHeight - pillarHeight*0.05], end: [0, storeyWidth/2 + storeyWidth*0.4*storeyMode[numMode][k].value + (storeyWidth*0.4*storeyMode[numMode][k].value - storeyWidth*0.4*storeyMode[numMode][k - 1].value)*0.05, k*1.1 *pillarHeight + pillarHeight*1.05], radius: pillarPitch, resolution: 200});}var storey = cube({size: [pillarPitch*2.5, storeyWidth*1.2, pillarHeight*0.1],center: [true,true,false]}).translate([0,storeyWidth*0.4*storeyMode[numMode][k].value,pillarHeight+(pillarHeight*1.1)*k]);group.push(pillarLeft,pillarRight,storey)}return group}