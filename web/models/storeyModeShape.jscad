function getParameterDefinitions(){return [{ name: 'numMode', caption: '模态阶数:', type: 'int', initial: 1, min: 1, max: 8, step: 1 }];}function main(params) {var storey = involuteStorey(params.numMode);return storey;}function involuteStorey(numMode) {var storeyMode = [[{'dof':1,'value':0.022726543383070705},{'dof':2,'value':0.08041553160620794},{'dof':3,'value':0.23889637509731718},{'dof':4,'value':0.4674377007240548},{'dof':5,'value':0.7364366509983279},{'dof':6,'value':1.0177989381458883},{'dof':7,'value':1.2858623226432595},{'dof':8,'value':1.5182430978462305},{'dof':9,'value':1.6967035793061838},{'dof':10,'value':1.807742134774041},{'dof':11,'value':1.8431303258257656},{'dof':12,'value':1.8002390372264006},{'dof':13,'value':1.6820509848046385},{'dof':14,'value':1.496981223844083},{'dof':15,'value':1.2587004954743044},{'dof':16,'value':0.9856218791937924},{'dof':17,'value':0.7002855469004023},{'dof':18,'value':0.4285797620451489},{'dof':19,'value':0.19896689728395053},{'dof':20,'value':0.04490095872421336},{'dof':21,'value':0.032833625951887144},],[{'dof':1,'value':0.022726543383070705},{'dof':2,'value':0.08041553160620794},{'dof':3,'value':0.23889637509731718},{'dof':4,'value':0.4674377007240548},{'dof':5,'value':0.7364366509983279},{'dof':6,'value':1.0177989381458883},{'dof':7,'value':1.2858623226432595},{'dof':8,'value':1.5182430978462305},{'dof':9,'value':1.6967035793061838},{'dof':10,'value':1.807742134774041},{'dof':11,'value':1.8431303258257656},{'dof':12,'value':1.8002390372264006},{'dof':13,'value':1.6820509848046385},{'dof':14,'value':1.496981223844083},{'dof':15,'value':1.2587004954743044},{'dof':16,'value':0.9856218791937924},{'dof':17,'value':0.7002855469004023},{'dof':18,'value':0.4285797620451489},{'dof':19,'value':0.19896689728395053},{'dof':20,'value':0.04490095872421336},{'dof':21,'value':0.032833625951887144},],[{'dof':1,'value':0.012566196024457889},{'dof':2,'value':0.282433356391695},{'dof':3,'value':0.8969462214143745},{'dof':4,'value':1.4882505990914168},{'dof':5,'value':1.7820685068530386},{'dof':6,'value':1.631029892217669},{'dof':7,'value':1.0432063877459867},{'dof':8,'value':0.17138765421759025},{'dof':9,'value':0.7379783559950964},{'dof':10,'value':1.4206074090583807},{'dof':11,'value':1.6759738583037518},{'dof':12,'value':1.4284945310170047},{'dof':13,'value':0.7510848661811432},{'dof':14,'value':0.15739904288312806},{'dof':15,'value':1.033222591699784},{'dof':16,'value':1.6285133217627186},{'dof':17,'value':1.788291003118182},{'dof':18,'value':1.502149539633381},{'dof':19,'value':0.9159741910185613},{'dof':20,'value':0.30379937894434855},{'dof':21,'value':0.016308796322766515},],[{'dof':1,'value':0.012566196024457889},{'dof':2,'value':0.282433356391695},{'dof':3,'value':0.8969462214143745},{'dof':4,'value':1.4882505990914168},{'dof':5,'value':1.7820685068530386},{'dof':6,'value':1.631029892217669},{'dof':7,'value':1.0432063877459867},{'dof':8,'value':0.17138765421759025},{'dof':9,'value':0.7379783559950964},{'dof':10,'value':1.4206074090583807},{'dof':11,'value':1.6759738583037518},{'dof':12,'value':1.4284945310170047},{'dof':13,'value':0.7510848661811432},{'dof':14,'value':0.15739904288312806},{'dof':15,'value':1.033222591699784},{'dof':16,'value':1.6285133217627186},{'dof':17,'value':1.788291003118182},{'dof':18,'value':1.502149539633381},{'dof':19,'value':0.9159741910185613},{'dof':20,'value':0.30379937894434855},{'dof':21,'value':0.016308796322766515},],[{'dof':1,'value':0.02243975730007625},{'dof':2,'value':0.16593828029299493},{'dof':3,'value':0.5476389363691052},{'dof':4,'value':1.015414378438329},{'dof':5,'value':1.4425017706358205},{'dof':6,'value':1.7263238497049895},{'dof':7,'value':1.7984528026600468},{'dof':8,'value':1.631029768276095},{'dof':9,'value':1.2378679920110303},{'dof':10,'value':0.6701345564002841},{'dof':11,'value':0.014007650848040953},{'dof':12,'value':0.6575896532156917},{'dof':13,'value':1.2282434835022855},{'dof':14,'value':1.6255710003255712},{'dof':15,'value':1.7977819992153827},{'dof':16,'value':1.7305761040814165},{'dof':17,'value':1.4512438777344725},{'dof':18,'value':1.0277450341022436},{'dof':19,'value':0.5624322559430528},{'dof':20,'value':0.18162792053136373},{'dof':21,'value':0.026547782631698748},],[{'dof':1,'value':0.02243975730007625},{'dof':2,'value':0.16593828029299493},{'dof':3,'value':0.5476389363691052},{'dof':4,'value':1.015414378438329},{'dof':5,'value':1.4425017706358205},{'dof':6,'value':1.7263238497049895},{'dof':7,'value':1.7984528026600468},{'dof':8,'value':1.631029768276095},{'dof':9,'value':1.2378679920110303},{'dof':10,'value':0.6701345564002841},{'dof':11,'value':0.014007650848040953},{'dof':12,'value':0.6575896532156917},{'dof':13,'value':1.2282434835022855},{'dof':14,'value':1.6255710003255712},{'dof':15,'value':1.7977819992153827},{'dof':16,'value':1.7305761040814165},{'dof':17,'value':1.4512438777344725},{'dof':18,'value':1.0277450341022436},{'dof':19,'value':0.5624322559430528},{'dof':20,'value':0.18162792053136373},{'dof':21,'value':0.026547782631698748},],[{'dof':1,'value':0.03539732601832918},{'dof':2,'value':0.48676290387448645},{'dof':3,'value':1.3327663840603616},{'dof':4,'value':1.8514749161090105},{'dof':5,'value':1.6382176779429174},{'dof':6,'value':0.7135263717295015},{'dof':7,'value':0.5205660995833045},{'dof':8,'value':1.489516034894964},{'dof':9,'value':1.7359770990117684},{'dof':10,'value':1.1444611479880367},{'dof':11,'value':0.005304894828753407},{'dof':12,'value':1.1411082627214197},{'dof':13,'value':1.732227679968628},{'dof':14,'value':1.4873867988957405},{'dof':15,'value':0.522834084188513},{'dof':16,'value':0.7050285516654256},{'dof':17,'value':1.6260702944129364},{'dof':18,'value':1.841223062939053},{'dof':19,'value':1.3308652186425036},{'dof':20,'value':0.49566136288834817},{'dof':21,'value':0.036368624196992785},],[{'dof':1,'value':0.03539732601832918},{'dof':2,'value':0.48676290387448645},{'dof':3,'value':1.3327663840603616},{'dof':4,'value':1.8514749161090105},{'dof':5,'value':1.6382176779429174},{'dof':6,'value':0.7135263717295015},{'dof':7,'value':0.5205660995833045},{'dof':8,'value':1.489516034894964},{'dof':9,'value':1.7359770990117684},{'dof':10,'value':1.1444611479880367},{'dof':11,'value':0.005304894828753407},{'dof':12,'value':1.1411082627214197},{'dof':13,'value':1.732227679968628},{'dof':14,'value':1.4873867988957405},{'dof':15,'value':0.522834084188513},{'dof':16,'value':0.7050285516654256},{'dof':17,'value':1.6260702944129364},{'dof':18,'value':1.841223062939053},{'dof':19,'value':1.3308652186425036},{'dof':20,'value':0.49566136288834817},{'dof':21,'value':0.036368624196992785},],];var numStorey = 21;var pillarHeight = 10;var storeyWidth = 10;var pillarPitch = 0.5;numMode = numMode - 1;var group = [];for (var k = 0; k < numStorey; k++) {if(k < 1){var pillarLeft = CSG.cylinder({start: [0, -storeyWidth/2, k*1.1*pillarHeight], end: [0, -storeyWidth/2 + storeyWidth*0.4*storeyMode[numMode][k].value*1.05, k*1.1 *pillarHeight + pillarHeight*1.05], radius: pillarPitch, resolution: 200});var pillarRight = CSG.cylinder({start: [0, storeyWidth/2, k*1.1*pillarHeight], end: [0, storeyWidth/2 + storeyWidth*0.4*storeyMode[numMode][k].value*1.05, k*1.1 *pillarHeight + pillarHeight*1.05], radius: pillarPitch, resolution: 200});}else{pillarLeft = CSG.cylinder({start: [0, -storeyWidth/2 + storeyWidth*0.4*storeyMode[numMode][k - 1].value - (storeyWidth*0.4*storeyMode[numMode][k].value - storeyWidth*0.4*storeyMode[numMode][k - 1].value)*0.05, k*1.1*pillarHeight - pillarHeight*0.05], end: [0, -storeyWidth/2 + storeyWidth*0.4*storeyMode[numMode][k].value + (storeyWidth*0.4*storeyMode[numMode][k].value - storeyWidth*0.4*storeyMode[numMode][k - 1].value)*0.05, k*1.1 *pillarHeight + pillarHeight*1.05], radius: pillarPitch, resolution: 200});pillarRight = CSG.cylinder({start: [0, storeyWidth/2 + storeyWidth*0.4*storeyMode[numMode][k - 1].value - (storeyWidth*0.4*storeyMode[numMode][k].value - storeyWidth*0.4*storeyMode[numMode][k - 1].value)*0.05, k*1.1*pillarHeight - pillarHeight*0.05], end: [0, storeyWidth/2 + storeyWidth*0.4*storeyMode[numMode][k].value + (storeyWidth*0.4*storeyMode[numMode][k].value - storeyWidth*0.4*storeyMode[numMode][k - 1].value)*0.05, k*1.1 *pillarHeight + pillarHeight*1.05], radius: pillarPitch, resolution: 200});}var storey = cube({size: [pillarPitch*2.5, storeyWidth*1.2, pillarHeight*0.1],center: [true,true,false]}).translate([0,storeyWidth*0.4*storeyMode[numMode][k].value,pillarHeight+(pillarHeight*1.1)*k]);group.push(pillarLeft,pillarRight,storey)}return group}