function getParameterDefinitions(){return [{ name: 'numMode', caption: '模态阶数:', type: 'int', initial: 1, min: 1, max: 8, step: 1 }];}function main(params) {var storey = involuteStorey(params.numMode);return storey;}function involuteStorey(numMode) {var storeyMode = [[{'dof':1,'value':0.02272654338307065},{'dof':2,'value':0.0804155316062095},{'dof':3,'value':0.23889637509731737},{'dof':4,'value':0.46743770072405305},{'dof':5,'value':0.7364366509983262},{'dof':6,'value':1.0177989381458867},{'dof':7,'value':1.285862322643258},{'dof':8,'value':1.518243097846228},{'dof':9,'value':1.6967035793061809},{'dof':10,'value':1.807742134774039},{'dof':11,'value':1.8431303258257634},{'dof':12,'value':1.800239037226398},{'dof':13,'value':1.6820509848046363},{'dof':14,'value':1.4969812238440803},{'dof':15,'value':1.2587004954743024},{'dof':16,'value':0.9856218791937903},{'dof':17,'value':0.7002855469004002},{'dof':18,'value':0.4285797620451474},{'dof':19,'value':0.19896689728394992},{'dof':20,'value':0.04490095872421309},{'dof':21,'value':0.03283362595188714},],[{'dof':1,'value':0.02272654338307065},{'dof':2,'value':0.0804155316062095},{'dof':3,'value':0.23889637509731737},{'dof':4,'value':0.46743770072405305},{'dof':5,'value':0.7364366509983262},{'dof':6,'value':1.0177989381458867},{'dof':7,'value':1.285862322643258},{'dof':8,'value':1.518243097846228},{'dof':9,'value':1.6967035793061809},{'dof':10,'value':1.807742134774039},{'dof':11,'value':1.8431303258257634},{'dof':12,'value':1.800239037226398},{'dof':13,'value':1.6820509848046363},{'dof':14,'value':1.4969812238440803},{'dof':15,'value':1.2587004954743024},{'dof':16,'value':0.9856218791937903},{'dof':17,'value':0.7002855469004002},{'dof':18,'value':0.4285797620451474},{'dof':19,'value':0.19896689728394992},{'dof':20,'value':0.04490095872421309},{'dof':21,'value':0.03283362595188714},],[{'dof':1,'value':0.012566196024460616},{'dof':2,'value':0.28243335639169975},{'dof':3,'value':0.8969462214143827},{'dof':4,'value':1.4882505990914257},{'dof':5,'value':1.7820685068530508},{'dof':6,'value':1.631029892217679},{'dof':7,'value':1.043206387745991},{'dof':8,'value':0.17138765421758903},{'dof':9,'value':0.7379783559951029},{'dof':10,'value':1.4206074090583907},{'dof':11,'value':1.6759738583037633},{'dof':12,'value':1.4284945310170134},{'dof':13,'value':0.7510848661811469},{'dof':14,'value':0.1573990428831299},{'dof':15,'value':1.0332225916997893},{'dof':16,'value':1.6285133217627268},{'dof':17,'value':1.788291003118193},{'dof':18,'value':1.5021495396333882},{'dof':19,'value':0.9159741910185657},{'dof':20,'value':0.30379937894434966},{'dof':21,'value':0.016308796322766658},],[{'dof':1,'value':0.012566196024460616},{'dof':2,'value':0.28243335639169975},{'dof':3,'value':0.8969462214143827},{'dof':4,'value':1.4882505990914257},{'dof':5,'value':1.7820685068530508},{'dof':6,'value':1.631029892217679},{'dof':7,'value':1.043206387745991},{'dof':8,'value':0.17138765421758903},{'dof':9,'value':0.7379783559951029},{'dof':10,'value':1.4206074090583907},{'dof':11,'value':1.6759738583037633},{'dof':12,'value':1.4284945310170134},{'dof':13,'value':0.7510848661811469},{'dof':14,'value':0.1573990428831299},{'dof':15,'value':1.0332225916997893},{'dof':16,'value':1.6285133217627268},{'dof':17,'value':1.788291003118193},{'dof':18,'value':1.5021495396333882},{'dof':19,'value':0.9159741910185657},{'dof':20,'value':0.30379937894434966},{'dof':21,'value':0.016308796322766658},],[{'dof':1,'value':0.022439757300077426},{'dof':2,'value':0.16593828029299204},{'dof':3,'value':0.5476389363691017},{'dof':4,'value':1.0154143784383252},{'dof':5,'value':1.442501770635816},{'dof':6,'value':1.7263238497049869},{'dof':7,'value':1.7984528026600453},{'dof':8,'value':1.631029768276097},{'dof':9,'value':1.2378679920110347},{'dof':10,'value':0.6701345564002914},{'dof':11,'value':0.014007650848049247},{'dof':12,'value':0.6575896532156859},{'dof':13,'value':1.2282434835022855},{'dof':14,'value':1.6255710003255752},{'dof':15,'value':1.7977819992153896},{'dof':16,'value':1.7305761040814274},{'dof':17,'value':1.4512438777344836},{'dof':18,'value':1.027745034102253},{'dof':19,'value':0.5624322559430581},{'dof':20,'value':0.18162792053136537},{'dof':21,'value':0.02654778263169878},],[{'dof':1,'value':0.022439757300077426},{'dof':2,'value':0.16593828029299204},{'dof':3,'value':0.5476389363691017},{'dof':4,'value':1.0154143784383252},{'dof':5,'value':1.442501770635816},{'dof':6,'value':1.7263238497049869},{'dof':7,'value':1.7984528026600453},{'dof':8,'value':1.631029768276097},{'dof':9,'value':1.2378679920110347},{'dof':10,'value':0.6701345564002914},{'dof':11,'value':0.014007650848049247},{'dof':12,'value':0.6575896532156859},{'dof':13,'value':1.2282434835022855},{'dof':14,'value':1.6255710003255752},{'dof':15,'value':1.7977819992153896},{'dof':16,'value':1.7305761040814274},{'dof':17,'value':1.4512438777344836},{'dof':18,'value':1.027745034102253},{'dof':19,'value':0.5624322559430581},{'dof':20,'value':0.18162792053136537},{'dof':21,'value':0.02654778263169878},],[{'dof':1,'value':0.03539732601833118},{'dof':2,'value':0.4867629038744862},{'dof':3,'value':1.3327663840603539},{'dof':4,'value':1.851474916108997},{'dof':5,'value':1.6382176779429103},{'dof':6,'value':0.7135263717294984},{'dof':7,'value':0.5205660995832986},{'dof':8,'value':1.4895160348949579},{'dof':9,'value':1.735977099011758},{'dof':10,'value':1.1444611479880318},{'dof':11,'value':0.005304894828754572},{'dof':12,'value':1.1411082627214129},{'dof':13,'value':1.732227679968618},{'dof':14,'value':1.487386798895732},{'dof':15,'value':0.5228340841885094},{'dof':16,'value':0.7050285516654212},{'dof':17,'value':1.6260702944129275},{'dof':18,'value':1.8412230629390423},{'dof':19,'value':1.3308652186424954},{'dof':20,'value':0.49566136288834545},{'dof':21,'value':0.036368624196992626},],[{'dof':1,'value':0.03539732601833118},{'dof':2,'value':0.4867629038744862},{'dof':3,'value':1.3327663840603539},{'dof':4,'value':1.851474916108997},{'dof':5,'value':1.6382176779429103},{'dof':6,'value':0.7135263717294984},{'dof':7,'value':0.5205660995832986},{'dof':8,'value':1.4895160348949579},{'dof':9,'value':1.735977099011758},{'dof':10,'value':1.1444611479880318},{'dof':11,'value':0.005304894828754572},{'dof':12,'value':1.1411082627214129},{'dof':13,'value':1.732227679968618},{'dof':14,'value':1.487386798895732},{'dof':15,'value':0.5228340841885094},{'dof':16,'value':0.7050285516654212},{'dof':17,'value':1.6260702944129275},{'dof':18,'value':1.8412230629390423},{'dof':19,'value':1.3308652186424954},{'dof':20,'value':0.49566136288834545},{'dof':21,'value':0.036368624196992626},],];var numStorey = 21;var pillarHeight = 10;var storeyWidth = 10;var pillarPitch = 0.5;numMode = numMode - 1;var group = [];for (var k = 0; k < numStorey; k++) {if(k < 1){var pillarLeft = CSG.cylinder({start: [0, -storeyWidth/2, k*1.1*pillarHeight], end: [0, -storeyWidth/2 + storeyWidth*0.4*storeyMode[numMode][k].value*1.05, k*1.1 *pillarHeight + pillarHeight*1.05], radius: pillarPitch, resolution: 200});var pillarRight = CSG.cylinder({start: [0, storeyWidth/2, k*1.1*pillarHeight], end: [0, storeyWidth/2 + storeyWidth*0.4*storeyMode[numMode][k].value*1.05, k*1.1 *pillarHeight + pillarHeight*1.05], radius: pillarPitch, resolution: 200});}else{pillarLeft = CSG.cylinder({start: [0, -storeyWidth/2 + storeyWidth*0.4*storeyMode[numMode][k - 1].value - (storeyWidth*0.4*storeyMode[numMode][k].value - storeyWidth*0.4*storeyMode[numMode][k - 1].value)*0.05, k*1.1*pillarHeight - pillarHeight*0.05], end: [0, -storeyWidth/2 + storeyWidth*0.4*storeyMode[numMode][k].value + (storeyWidth*0.4*storeyMode[numMode][k].value - storeyWidth*0.4*storeyMode[numMode][k - 1].value)*0.05, k*1.1 *pillarHeight + pillarHeight*1.05], radius: pillarPitch, resolution: 200});pillarRight = CSG.cylinder({start: [0, storeyWidth/2 + storeyWidth*0.4*storeyMode[numMode][k - 1].value - (storeyWidth*0.4*storeyMode[numMode][k].value - storeyWidth*0.4*storeyMode[numMode][k - 1].value)*0.05, k*1.1*pillarHeight - pillarHeight*0.05], end: [0, storeyWidth/2 + storeyWidth*0.4*storeyMode[numMode][k].value + (storeyWidth*0.4*storeyMode[numMode][k].value - storeyWidth*0.4*storeyMode[numMode][k - 1].value)*0.05, k*1.1 *pillarHeight + pillarHeight*1.05], radius: pillarPitch, resolution: 200});}var storey = cube({size: [pillarPitch*2.5, storeyWidth*1.2, pillarHeight*0.1],center: [true,true,false]}).translate([0,storeyWidth*0.4*storeyMode[numMode][k].value,pillarHeight+(pillarHeight*1.1)*k]);group.push(pillarLeft,pillarRight,storey)}return group}